<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Solution Patterns: Solution Patterns - Optimizing Traffic and Observability with OpenShift Service Mesh 3 :: Solution Patterns for Cloud Native Architectures</title>
    <link rel="canonical" href="https://redhat-solution-patterns.github.io/solution-patterns/solution-pattern-template/index.html">
    <link rel="next" href="02-architecture.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RE43KB33S7"></script>
<script>function gtag() { dataLayer.push(arguments) }; window.dataLayer = window.dataLayer || []; gtag('js', new Date()); gtag('config', 'G-RE43KB33S7')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" style="font-size: 20px; color: white"
        href="https://redhat-solution-patterns.github.io/solution-patterns">
        <img src="../_/img/logo.png" height="35px" alt="Solution Patterns">&nbsp; Solution Patterns for Cloud Native Architectures</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Architectures &amp; Patterns</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.redhat.com/architect/portfolio/" target="_blank">Portfolio Architecture&nbsp; </a>
            <a class="navbar-item" href="https://redhat-solution-patterns.github.io/solution-patterns/patterns.html"  target="_blank">Solution Patterns </a>
            <a class="navbar-item" href="https://validatedpatterns.io/" target="_blank">Validated Patterns&nbsp;</a>
            <a class="navbar-item" href="https://catalog.redhat.com/solutions" target="_blank">Ecosystem Solutions&nbsp;</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://developers.redhat.com">Red Hat Developers</a>
            <a class="navbar-item" target="_blank" href="https://developers.redhat.com/app-dev-platform">App Dev Platform</a>
            <a class="navbar-item" target="_blank" href="https://www.redhat.com/en/products/application-foundations">Red Hat Application Services</a>
          </div>
        </div>

          <a class="navbar-item" target="_blank" href="https://github.com/redhat-solution-patterns/redhat-solution-patterns.github.io/issues">Feedback</a>
          <a class="navbar-item" target="_blank" href="https://redhat-solution-patterns.github.io/solution-patterns/contributors-guide.html">Contribute</a>

      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="solution-pattern-template" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OpenShift Service Mesh 3</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">1. Home page</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#use-cases">1.1 Use cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#_the_story_behind_this_solution_pattern">1.2 The story behind this solution pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#_the_solution">1.3 The solution</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-architecture.html">2. Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#tech_stack">2.1. Technology stack</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#in_depth">2.2. An in-depth look at the solution&#8217;s architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-architecture.html#more_tech">2.3. More about the technology stack</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-demo.html">3. See the Solution in Action</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-demo.html#_demonstration">3.1. Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-demo.html#_run_the_demonstration">3.2. Run this demonstration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-demo.html#_before_getting_started">3.3. Pre-requisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-demo.html#_installing_the_demo">3.4. Installing the demo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-demo.html#_walkthrough_guide">3.5. Walkthrough guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="developer-resources.html">4. Developer Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="https://redhat-solution-patterns.github.io/solution-patterns/patterns.html" target="_blank" rel="noopener">Explore Red Hat Solution Patterns</a></span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Service Mesh 3</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenShift Service Mesh 3</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link is-current"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift Service Mesh 3</a></li>
    <li><a href="index.html">1. Home page</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-solution-patterns/solution-pattern-ossm3/edit/main/documentation/modules/ROOT/pages/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Solution Patterns: Solution Patterns - Optimizing Traffic and Observability with OpenShift Service Mesh 3</h1>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/mesh-cover-page.png" alt="mesh cover page" width="75%">
</div>
</div>
<div class="paragraph">
<p>Red Hat OpenShift Service Mesh adds a transparent layer on existing distributed applications without requiring any changes to the application code. The mesh introduces an easy way to create a network of deployed services that provides discovery, load balancing, service-to-service authentication, failure recovery, metrics, and monitoring. A service mesh also provides more complex operational functionality, including A/B testing, canary releases, access control, and end-to-end authentication.</p>
</div>
<div class="paragraph">
<p>Microservice architectures split the work of enterprise applications into modular services (deployed as pods in Kuberntetes), which can make scaling and maintenance easier. However, as an enterprise application built on a microservice architecture grows in size and complexity, it can potentially become difficult to understand and manage. Service Mesh can address those architecture problems by capturing or intercepting traffic between services and can modify, redirect, or create new requests to other services in a way that is independant from business logic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mesh-diagram-01.png" alt="mesh diagram 01" width="100%">
</div>
</div>
<div class="paragraph">
<p><strong>Included with OpenShift Container Platform Subscription</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mesh-diagram-02.png" alt="mesh diagram 02" width="75%">
</div>
</div>
<div class="paragraph">
<p>A key benefit of OpenShift Service Mesh is that it, along with most of its critical dependencies (e.g., Istio, Jaeger, Kiali, Prometheus), is included and fully supported with the OpenShift Container Platform subscription. This integration ensures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Enterprise Support</strong>: Comprehensive support from Red Hat for both OpenShift Service Mesh and its dependencies.</p>
</li>
<li>
<p><strong>Seamless Upgrades</strong>: Coordinated updates with the OpenShift platform, ensuring compatibility and reducing operational overhead.</p>
</li>
<li>
<p><strong>Cost Efficiency</strong>: Organizations can leverage advanced microservices management capabilities without incurring additional licensing or support costs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By standardizing these capabilities at the platform level and bundling them into the OpenShift subscription, OpenShift Service Mesh enables teams to build, scale, and manage microservices architectures with minimal complexity and maximum support. This allows developers to return their focus to innovation and delivering business value.</p>
</div>
<div class="paragraph">
<p>This solution pattern demonstrates how OpenShift Service Mesh 3 empowers platform teams to manage traffic flows with precision, including showcasing a canary deployment for safe, incremental rollouts. Additionally, it highlights how observability insights help detect and resolve issues quickly, ensuring reliability and resiliency across hybrid cloud environments.</p>
</div>
 <br>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>OpenShift Service Mesh 3.0</strong> is Technology Preview only at this time.</p>
</div>
<div class="paragraph">
<p>Support for <strong>Gateway API</strong> became generally available in OpenShift Service Mesh 2.6, supporting the Kubernetes Gateway API version 1.0.0. This functionality is exclusive to Red Hat OpenShift Service Mesh, and the Gateway API custom resource definitions (CRDs) are not supported outside this context.</p>
</div>
<div class="paragraph">
<p>Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.openshift.com/container-platform/4.17/service_mesh/v2x/servicemesh-release-notes.html#gateway-api-ga-cluster-wide-deployments-ossm-2-6-0_ossm-release-notes">Service Mesh 2.x Release Notes</a></p>
</div>
<div class="paragraph">
<p><a href="https://docs.openshift.com/service-mesh/3.0.0tp1/ossm-release-notes/ossm-release-notes-assembly.html">Service Mesh 3 Tech Preview Release Notes</a></p>
</div>
<div class="paragraph">
<p><a href="https://access.redhat.com/support/offerings/techpreview">More details about Technology Preview terms</a></p>
</div>
<div class="paragraph">
<p>This Solution Pattern will update as supported releases become generally available (GA).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Contributors:</strong> <a href="https://github.com/bugbiteme">Leon Levy</a> - Red Hat OpenShift Specialist Solution Architect</p>
</div>
 <br>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Solutions Patterns help you understand the art of the possible with Red Hat&#8217;s portfolio, and not intended to be used as is for production environments. You are welcome use any part of this solution pattern for your own workloads.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-cases"><a class="anchor" href="#use-cases"></a><a class="link" href="#use-cases">1. Use cases</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Common use cases that can be address with this architecture are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Traffic Management</strong>: Control the flow of traffic and API calls between services, make calls more reliable, and make the network more robust in the face of adverse conditions.</p>
</li>
<li>
<p><strong>Service Identity and Security</strong>: Provide services in the mesh with a verifiable identity and provide the ability to protect service traffic as it flows over networks of varying degrees of trustworthiness.</p>
</li>
<li>
<p><strong>Policy Enforcement</strong>: Apply organizational policy to the interaction between services, ensure access policies are enforced and resources are fairly distributed among consumers. Policy changes are made by configuring the mesh, not by changing application code.</p>
</li>
<li>
<p><strong>Telemetry</strong>: Gain understanding of the dependencies between services and the nature and flow of traffic between them, providing the ability to quickly identify issues.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_story_behind_this_solution_pattern"><a class="anchor" href="#_the_story_behind_this_solution_pattern"></a><a class="link" href="#_the_story_behind_this_solution_pattern">2. The story behind this solution pattern</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Canary Deployment with Traffic Splitting</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/canary-01.png" alt="canary 01" width="75%">
</div>
</div>
<div class="paragraph">
<p><strong>Objective</strong>: Safely roll out a new version of a microservice while monitoring its performance.</p>
</div>
<div class="paragraph">
<p>A retail company has an application running on OpenShift that handles online orders. The development team wants to deploy a new version (<code>v2</code>) of their <code>hello-service</code> RestAPI without disrupting users of the current version (<code>v1</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_solution"><a class="anchor" href="#_the_solution"></a><a class="link" href="#_the_solution">3. The Solution</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using OpenShift Service Mesh 3 with the Kubernetes Gateway API, they configure a traffic-splitting policy to direct 90% of traffic to <code>v1</code> and 10% to <code>v2</code>.</p>
</div>
<div class="paragraph">
<p>With integrated observability tools like <strong>Jaeger</strong> and <strong>Kiali</strong>, the team monitors traffic flow, latency, and error rates in real-time for <code>v2</code>.</p>
</div>
<div class="paragraph">
<p>Once performance metrics confirm stability, they incrementally increase traffic to <code>v2</code> until it handles 100% of requests, ensuring a smooth transition.</p>
</div>
<div class="paragraph">
<p>This pattern aims to cover the following use cases of OpenShift Service Mesh</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Traffic Control for Continuous  Delivery</strong>: Enable safe progressive delivery with traffic management across application versions</p>
</li>
<li>
<p><strong>Application Observability</strong>:  Out of the box application metrics, request logs and distributed traces for system observability</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All while encrypting service-to-service communication with default mTLS</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="next"><a href="02-architecture.html" class="query-params-link">2. Architecture</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <img
          src="../_/img/app-services-logo.png" height="40px" alt="Cloud Native Architecture Solution Patterns"  href="https://redhat.com" ></a>
</footer><script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
